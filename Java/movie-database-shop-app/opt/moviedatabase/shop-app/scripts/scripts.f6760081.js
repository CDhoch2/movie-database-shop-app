!function(){"use strict";var a=angular.module("MovieDatabase",["MovieDatabase.services","MovieDatabase.controllers","ngAnimate","ngRoute"]);a.constant("BASE_URL","/movies"),a.constant("API_MOVIES_BASE","http://moviedatabase.com/shop-rest/movies"),a.config(["$routeProvider","$httpProvider","BASE_URL",function(a,b,c){function d(a,c){b.defaults.headers.common[a]=c}a.when(c,{templateUrl:"partials/list.html",controller:"ListCtrl",controllerAs:"ctrl",resolve:{movies:["MovieService",function(a){return a.getAll()}]}}).when(c+"/:movieId",{templateUrl:"partials/form.html",controller:"EditCtrl",controllerAs:"ctrl",resolve:{movie:["MovieService","$route",function(a,b){return a.get(b.current.params.movieId)}]}}).otherwise({redirectTo:c}),d("Accept","application/json, application/hal+json"),b.interceptors.push("HttpInterceptor")}])}(),function(){"use strict";var a=angular.module("MovieDatabase.controllers",["ngRoute"]);a.controller("ListCtrl",["MovieService","BASE_URL","movies",function(a,b,c){var d=this;d.baseUrl=b,d.movies=c}]),a.controller("EditCtrl",["MovieService","$location","BASE_URL","movie",function(a,b,c,d){var e=this;e.movie=d,e.save=function(){a.edit(e.movie)},e.back=function(){b.path(c)}}])}(),function(){"use strict";var a=angular.module("MovieDatabase.services",[]);a.service("MovieService",["$http","API_MOVIES_BASE",function(a,b){function c(a){return b+"/"+encodeURIComponent(a)}this.get=function(b){return a.get(c(b)).then(function(a){return a.data})},this.getAll=function(){return a.get(b).then(function(a){return a.data})},this.edit=function(b){return a({method:"put",url:c(b.id),data:angular.toJson({id:b.id,quantity:b.quantity,price:b.price}),headers:{"Content-Type":"application/json"}})}}]),a.service("HttpInterceptor",["$rootScope","$q",function(a,b){this.responseError=function(c){return console.error("Response Error",arguments),a.$broadcast("network:error",c),b.reject(c)}}])}();